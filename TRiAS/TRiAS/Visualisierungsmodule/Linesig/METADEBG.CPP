#include"stdafx.h"
#include"metafile.h"

#ifdef _DEBUG
#undef THIS_FILE
static char BASED_CODE THIS_FILE[] = __FILE__;
#endif

static char BASED_CODE RCS[] = "$RCSfile$ $Revision$ $Date$";

#if defined(_DEBUG) || defined(_RDEBUG)

//////////////////////////////////////////////////////////////////////////////

typedef	struct	tagMETARECORDINFO {
	WORD	riRecType;
	WORD	riArgType;
	LPCTSTR	riDescription;
	} METARECORDINFO;

//////////////////////////////////////////////////////////////////////////////
// Werte für ArgType
//////////////////////////////////////////////////////////////////////////////

#define	ARG_NORMAL		0
#define	ARG_LOGPEN		1
#define	ARG_LOGBRUSH	2
#define	ARG_POLYGON		3
#define	ARG_POLYLINE	4
#define	ARG_POLYPOLY	5

METARECORDINFO	infoTable[] = {
{	META_SETBKCOLOR,	ARG_NORMAL,	"SETBKCOLOR"	},
{	META_SETBKMODE,	ARG_NORMAL,	"SETBKMODE"	},
{	META_SETMAPMODE,	ARG_NORMAL,	"SETMAPMODE"	},
{	META_SETROP2,	ARG_NORMAL,	"SETROP2"	},
{	META_SETRELABS,	ARG_NORMAL,	"SETRELABS"	},
{	META_SETPOLYFILLMODE,	ARG_NORMAL,	"SETPOLYFILLMODE"	},
{	META_SETSTRETCHBLTMODE,	ARG_NORMAL,	"SETSTRETCHBLTMODE"	},
{	META_SETTEXTCHAREXTRA,	ARG_NORMAL,	"SETTEXTCHAREXTRA"	},
{	META_SETTEXTCOLOR,	ARG_NORMAL,	"SETTEXTCOLOR"	},
{	META_SETTEXTJUSTIFICATION,	ARG_NORMAL,	"SETTEXTJUSTIFICATION"	},
{	META_SETWINDOWORG,	ARG_NORMAL,	"SETWINDOWORG"	},
{	META_SETWINDOWEXT,	ARG_NORMAL,	"SETWINDOWEXT"	},
{	META_SETVIEWPORTORG,	ARG_NORMAL,	"SETVIEWPORTORG"	},
{	META_SETVIEWPORTEXT,	ARG_NORMAL,	"SETVIEWPORTEXT"	},
{	META_OFFSETWINDOWORG,	ARG_NORMAL,	"OFFSETWINDOWORG"	},
{	META_SCALEWINDOWEXT,	ARG_NORMAL,	"SCALEWINDOWEXT"	},
{	META_OFFSETVIEWPORTORG,	ARG_NORMAL,	"OFFSETVIEWPORTORG"	},
{	META_SCALEVIEWPORTEXT,	ARG_NORMAL,	"SCALEVIEWPORTEXT"	},
{	META_LINETO,	ARG_NORMAL,	"LINETO"},
{	META_MOVETO,	ARG_NORMAL,	"MOVETO"	},
{	META_EXCLUDECLIPRECT,	ARG_NORMAL,	"EXCLUDECLIPRECT"	},
{	META_INTERSECTCLIPRECT,	ARG_NORMAL,	"INTERSECTCLIPRECT"	},
{	META_ARC,	ARG_NORMAL,	"ARC"	},
{	META_ELLIPSE,	ARG_NORMAL,	"ELLIPSE"	},
{	META_FLOODFILL,	ARG_NORMAL,	"FLOODFILL"	},
{	META_PIE,	ARG_NORMAL,	"PIE"	},
{	META_RECTANGLE,	ARG_NORMAL,	"RECTANGLE"	},
{	META_ROUNDRECT,	ARG_NORMAL,	"ROUNDRECT"	},
{	META_PATBLT,	ARG_NORMAL,	"PATBLT"	},
{	META_SAVEDC,	ARG_NORMAL,	"SAVEDC"	},
{	META_SETPIXEL,	ARG_NORMAL,	"SETPIXEL"	},
{	META_OFFSETCLIPRGN,	ARG_NORMAL,	"OFFSETCLIPRGN"	},
{	META_TEXTOUT,	ARG_NORMAL,	"TEXTOUT"	},
{	META_BITBLT,	ARG_NORMAL,	"BITBLT"	},
{	META_STRETCHBLT,	ARG_NORMAL,	"STRETCHBLT"	},
{	META_POLYGON,	ARG_POLYGON,	"POLYGON"	},
{	META_POLYLINE,	ARG_POLYLINE,	"POLYLINE"	},
{	META_ESCAPE,	ARG_NORMAL,	"ESCAPE"	},
{	META_RESTOREDC,	ARG_NORMAL,	"RESTOREDC"	},
{	META_FILLREGION,	ARG_NORMAL,	"FILLREGION"	},
{	META_FRAMEREGION,	ARG_NORMAL,	"FRAMEREGION"	},
{	META_INVERTREGION,	ARG_NORMAL,	"INVERTREGION"	},
{	META_PAINTREGION,	ARG_NORMAL,	"PAINTREGION"	},
{	META_SELECTCLIPREGION,	ARG_NORMAL,	"SELECTCLIPREGION"	},
{	META_SELECTOBJECT,	ARG_NORMAL,	"SELECTOBJECT"	},
{	META_SETTEXTALIGN,	ARG_NORMAL,	"SETTEXTALIGN"	},
// {	META_DRAWTEXT,	ARG_NORMAL,	"DRAWTEXT"	},
{	META_CHORD,	ARG_NORMAL,	"CHORD"	},
{	META_SETMAPPERFLAGS,	ARG_NORMAL,	"SETMAPPERFLAGS"	},
{	META_EXTTEXTOUT,	ARG_NORMAL,	"EXTTEXTOUT"	},
{	META_SETDIBTODEV,	ARG_NORMAL,	"SETDIBTODEV"	},
{	META_SELECTPALETTE,	ARG_NORMAL,	"SELECTPALETTE"	},
{	META_REALIZEPALETTE,	ARG_NORMAL,	"REALIZEPALETTE"	},
{	META_ANIMATEPALETTE,	ARG_NORMAL,	"ANIMATEPALETTE"	},
{	META_SETPALENTRIES,	ARG_NORMAL,	"SETPALENTRIES"	},
{	META_POLYPOLYGON,	ARG_POLYPOLY,	"POLYPOLYGON"	},
{	META_RESIZEPALETTE,	ARG_NORMAL,	"RESIZEPALETTE"	},
{	META_DIBBITBLT,	ARG_NORMAL,	"DIBBITBLT"	},
{	META_DIBSTRETCHBLT,	ARG_NORMAL,	"DIBSTRETCHBLT"	},
{	META_DIBCREATEPATTERNBRUSH,	ARG_NORMAL,	"DIBCREATEPATTERNBRUSH"	},
{	META_STRETCHDIB,	ARG_NORMAL,	"STRETCHDIB"	},
{	META_EXTFLOODFILL,	ARG_NORMAL,	"EXTFLOODFILL"	},
// {	META_RESETDC,	ARG_NORMAL,	"RESETDC"	},
// {	META_STARTDOC,	ARG_NORMAL,	"STARTDOC"	},
// {	META_STARTPAGE,	ARG_NORMAL,	"STARTPAGE"	},
// {	META_ENDPAGE,	ARG_NORMAL,	"ENDPAGE"	},
// {	META_ABORTDOC,	ARG_NORMAL,	"ABORTDOC"	},
// {	META_ENDDOC,	ARG_NORMAL,	"ENDDOC"	},
{	META_DELETEOBJECT,	ARG_NORMAL,	"DELETEOBJECT"	},
{	META_CREATEPALETTE,	ARG_NORMAL,	"CREATEPALETTE"	},
// {	META_CREATEBRUSH,	ARG_LOGBRUSH,	"CREATEBRUSH"	},
{	META_CREATEPATTERNBRUSH,	ARG_LOGBRUSH,	"CREATEPATTERNBRUSH"	},
{	META_CREATEPENINDIRECT,	ARG_LOGPEN,	"CREATEPENINDIRECT"	},
{	META_CREATEFONTINDIRECT,	ARG_NORMAL,	"CREATEFONTINDIRECT"	},
{	META_CREATEBRUSHINDIRECT,	ARG_LOGBRUSH,	"CREATEBRUSHINDIRECT"	},
// {	META_CREATEBITMAPINDIRECT,	ARG_NORMAL,	"CREATEBITMAPINDIRECT"	},
// {	META_CREATEBITMAP,	ARG_NORMAL,	"CREATEBITMAP"	},
{	META_CREATEREGION,	ARG_NORMAL,	"CREATEREGION"	},
	{ 0x0000, 0,	NULL },
	} ;

void CMetaFile::InitDebug( ) {
	METARECORDINFO	*pI;

	for( pI = infoTable; pI->riRecType; pI++ ) {
		m_listOfRecTypes[ pI->riRecType ] = pI;
	}
}

void CMetaFile::DeInitDebug( ) {
	m_listOfRecTypes.RemoveAll( );
}

static TCHAR *szNIL = _T("");

LPCTSTR CMetaFile::RecType( const UINT rdFunction ) {
	METARECORDINFO	*pI;
	if( m_listOfRecTypes.Lookup( rdFunction, (void*&) pI ) )
		return pI->riDescription;
	return szNIL;
}

#endif // defined(_DEBUG) or defined(_RDEBUG)
